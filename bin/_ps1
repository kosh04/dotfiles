#!/bin/bash
# Usage: source ~/path/to/_ps1

_ps1()
{
local bold="\[\e[1m\]"          # $(tput bold)
local red="\[\e[31m\]"          # $(tput setaf 1)
local green="\[\e[32m\]"        # $(tput setaf 2)
local blue="\[\e[34m\]"         # $(tput setaf 4)
local reset="\[\e[0m\]"         # $(tput sgr0)

if command -v __git_ps1 >/dev/null; then
echo "\$(_ps1_status)[${bold}${red}\u${green}@${blue}\h${reset} \W]\$(__git_ps1)\\$ "
else
echo "\$(_ps1_status)[${bold}${red}\u${green}@${blue}\h${reset} \W]\\$ "
fi
}

_ps1_status()
{
    local status=$?
    [ "${PS1_STATUS}" != "yes" ] && return
    if [ "${status}" -eq 0 ]; then
        printf "\e[32m%s\e[0m" "(*'-')"
    else
        printf "\e[31m%s#%d\e[0m" "(*;-;)" "${status}"
    fi
}

PS1=$(_ps1)
